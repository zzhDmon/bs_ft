webpackJsonp([27],{1021:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[t("i",{staticClass:"el-icon-date"}),e._v("模板设置")]),e._v(" "),t("el-breadcrumb-item",[5==e.paramsType?t("span",[e._v("首页Banner")]):e._e(),e._v(" "),6==e.paramsType?t("span",[e._v("朋友圈大字报")]):e._e(),e._v(" "),7==e.paramsType?t("span",[e._v("幽默图")]):e._e()]),e._v(" "),e.paramsId<0?t("el-breadcrumb-item",[5==e.paramsType?t("span",[e._v("Banner新增")]):e._e(),e._v(" "),6==e.paramsType?t("span",[e._v("大字报新增")]):e._e(),e._v(" "),7==e.paramsType?t("span",[e._v("幽默图新增")]):e._e()]):t("el-breadcrumb-item",[5==e.paramsType?t("span",[e._v("Banner修改")]):e._e(),e._v(" "),6==e.paramsType?t("span",[e._v("大字报修改")]):e._e(),e._v(" "),7==e.paramsType?t("span",[e._v("幽默图修改")]):e._e()])],1)],1),e._v(" "),t("div",{staticClass:"form-box",staticStyle:{width:"100%"}},[t("el-form",{ref:"AddBLFform",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"模板图片："}},[t("el-upload",{attrs:{action:e.HOST+"/Upload/Save",data:{path:"bannerlinefun"},"show-file-list":!1,"list-type":"picture-card","on-success":e.handleAvatarSuccess}},[e.form.ShowImages?t("img",{staticClass:"avatar",staticStyle:{width:"148px",height:"148px"},attrs:{src:e.form.ShowImages}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),5==e.paramsType?t("el-form-item",{attrs:{label:"链接："}},[t("el-input",{attrs:{placeholder:"请输入链接"},model:{value:e.form.Url,callback:function(a){e.$set(e.form,"Url",a)},expression:"form.Url"}})],1):e._e(),e._v(" "),5==e.paramsType?t("el-form-item",{attrs:{label:"备注："}},[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入备注信息"},model:{value:e.form.Mark,callback:function(a){e.$set(e.form,"Mark",a)},expression:"form.Mark"}})],1):e._e(),e._v(" "),6==e.paramsType?t("el-form-item",{attrs:{label:"类别：",prop:"LineImageType"}},[t("el-select",{attrs:{placeholder:"请选择类别"},model:{value:e.form.LineImageType,callback:function(a){e.$set(e.form,"LineImageType",a)},expression:"form.LineImageType"}},[t("el-option",{key:"1",attrs:{label:"小区",value:"1"}}),e._v(" "),t("el-option",{key:"2",attrs:{label:"房屋",value:"2"}}),e._v(" "),t("el-option",{key:"3",attrs:{label:"结构",value:"3"}}),e._v(" "),t("el-option",{key:"4",attrs:{label:"位置",value:"4"}}),e._v(" "),t("el-option",{key:"5",attrs:{label:"附加",value:"5"}})],1)],1):e._e(),e._v(" "),6==e.paramsType||7==e.paramsType?t("el-form-item",{attrs:{label:"标题：",prop:"Name"}},[t("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.Name,callback:function(a){e.$set(e.form,"Name",a)},expression:"form.Name"}})],1):e._e(),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.onSubmit("AddBLFform")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]}},509:function(e,a,t){var r=t(200)(t(577),t(1021),null,null);e.exports=r.exports},541:function(e,a,t){e.exports={default:t(544),__esModule:!0}},544:function(e,a,t){var r=t(66),s=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},577:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t(541),s=t.n(r);a.default={data:function(){return{paramsId:"",paramsType:"",form:{},rules:{Name:[{required:!0,message:"请输标题",trigger:"blur"}],LineImageType:[{required:!0,message:"请选择类型",trigger:"blur"}]}}},watch:{$route:function(){this.paramsId=this.$route.params.id,this.paramsType=this.$route.params.type,this.myaxios()}},created:function(){this.paramsId=this.$route.params.id,this.paramsType=this.$route.params.type,this.myaxios()},methods:{myaxios:function(){var e=this;this.$http.get(this.HOST+"/template/Get",{params:{Id:this.paramsId,TemplateType:this.paramsType}}).then(function(a){e.form=a.data,a.data.LineImageType||(e.form.LineImageType=null)},function(e){})},onSubmit:function(e){var a=this,t=s()(this.form);this.$refs[e].validate(function(e){e?a.$http.post(a.HOST+"/template/Save",{TemplateType:a.paramsType,data:t}).then(function(e){a.$message.success("提交成功！"),a.$router.back()},function(e){a.$message.error("提交失败！")}):a.$message.error("请将信息填写完整！")})},cancel:function(){this.$router.back()},handleAvatarSuccess:function(e){0==e.error?(this.form.ShowImages=e.view,this.form.Images=e.url):this.$message.error(e.msg)}}}}});